import { CodeSurfer } from "mdx-deck-code-surfer"
import Code from 'mdx-code';
import nightOwl from "prism-react-renderer/themes/nightOwl"

#### <Report\>
# Структуры данных
# JavaScript

#### Красильнков Роман

---


# Array
# [ ]

---

<CodeSurfer
  title="Объявление"
  code={require("!raw-loader!./snippets/array/init.js")}
  lang="javascript"
  showNumbers={false}
  theme={nightOwl}
/>

---

<CodeSurfer
  title="Свойства"
  code={require("!raw-loader!./snippets/array/props.js")}
  lang="javascript"
  showNumbers={false}
  theme={nightOwl}
/>

---

<CodeSurfer
  title="Методы"
  code={require("!raw-loader!./snippets/array/methods.js")}
  lang="javascript"
  showNumbers={false}
  theme={nightOwl}
    steps={[
    { lines: [1], notes: "Объявление" },
    { range: [3, 7], notes: "Проверки" },
    { range: [9, 15], notes: "Методы вставки/извлечения элементов" },
    { range: [17, 22], notes: "Метод для удаления и вставки элементов" }
  ]}
/>

---

<CodeSurfer
  title="Методы итерации"
  code={require("!raw-loader!./snippets/array/usage.js")}
  lang="javascript"
  showNumbers={false}
  theme={nightOwl}
    steps={[
    { lines: [1], notes: "Объявление" },
    { range: [3, 7], notes: "Циклы" },
    { range: [9, 17], notes: "Методы высшего порядка" },
  ]}
/>

---

# Object
# { }

---

<CodeSurfer
  title="Объявление"
  code={require("!raw-loader!./snippets/object/init.js")}
  lang="javascript"
  showNumbers={false}
  theme={nightOwl}
  steps={[
    { range: [1, 3], notes: "Способы создать объект" },
    { range: [5, 10], notes: "Определение заначений в конструкторе" },
  ]}
/>

---

<CodeSurfer
  title="Свойства"
  code={require("!raw-loader!./snippets/object/props.js")}
  lang="javascript"
  showNumbers={false}
  theme={nightOwl}
  steps={[
    { range: [1, 10], notes: "Пример объекта" },
    { range: [12, 16], notes: "Чтение свойств" },
    { range: [18, 23], notes: "Модификация свойств" }
  ]}
/>

---

<CodeSurfer
  title="Методы"
  code={require("!raw-loader!./snippets/object/methods.js")}
  lang="javascript"
  showNumbers={false}
  theme={nightOwl}
  steps={[
    { lines: [1], notes: "Объявление" },
    { range: [3, 6], notes: "Цикл по свойствам объекта" },
    { range: [8, 13], notes: "Извлечение данных" },
    { range: [15, 19], notes: "Модификация доступа" }
  ]}
/>

---

# Современные возможности

---

<CodeSurfer
  title="Улучшения"
  code={require("!raw-loader!./snippets/esnext/improvements.js")}
  lang="javascript"
  showNumbers={false}
  theme={nightOwl}
  steps={[
    { range: [1, 12], notes: "Объявление" },
    { range: [14, 21], notes: "Деструктуризация" },
  ]}
/>

---

<CodeSurfer
  title="Set"
  code={require("!raw-loader!./snippets/esnext/set.js")}
  lang="javascript"
  showNumbers={false}
  theme={nightOwl}
  steps={[
    { range: [1, 5], notes: "Объявление" },
    { range: [7, 16], notes: "Взаимодействие" },
  ]}
/>

---

<CodeSurfer
  title="Map"
  code={require("!raw-loader!./snippets/esnext/map.js")}
  lang="javascript"
  showNumbers={false}
  theme={nightOwl}
  steps={[
    { range: [1, 9], notes: "Объявление" },
    { range: [11, 22], notes: "Взаимодействие" },
  ]}
/>

---

# JSON
#### JavaScript Object Notation

---

<CodeSurfer
  title="JSON"
  code={require("!raw-loader!./snippets/json/data.js")}
  lang="json"
  showNumbers={false}
  theme={nightOwl}
  steps={[
    { range: [2, 4], notes: "Пары ключ: значение" },
    { range: [5, 12], notes: "Объект" },
    { range: [13, 18], notes: "Массив" },
    { range: [1, 19] }
  ]}
/>

---

<CodeSurfer
  title="JSON"
  code={require("!raw-loader!./snippets/json/show.js")}
  lang="js"
  showNumbers={false}
  theme={nightOwl}
  steps={[
    { range: [1, 19] },
    { range: [21, 24], notes: "Конвертация" }
  ]}
/>

---

# Красильнков Роман

#### Структуры данных JavaScript

#### </Report\>


---

# Example
## Eval

---

<CodeSurfer
  title="Eval"
  code={require("!raw-loader!./snippets/eval.js")}
  lang="js"
  showNumbers={false}
  theme={nightOwl}
  steps={[
    { range: [1, 6], notes: "Операторы" },
    { range: [8, 21], notes: "Парсер" },
    { range: [11, 18], notes: "Обработка символов" },
    { range: [24, 49], notes: "Сортировочная станция" },
    { range: [29, 34] },
    { range: [35, 41] },
    { range: [42, 45] },
    { range: [51, 59], notes: "Вычислитель" },
    { range: [61, 65], notes: "Функция" },
  ]}
/>

---

export default Code

```
const OPERATORS = {
  '+': [1, (b, a) => a + b],
  '-': [1, (b, a) => a - b],
  '*': [2, (b, a) => a * b],
  '/': [2, (b, a) => a / b],
}

function* parse (infixExpression) {
  let value = ''
  for (let char of infixExpression) {
    if ('0123456789.'.includes(char))
      value += char
    else if (value) {
      yield Number(value)
      value = ''
    }
    if (char in OPERATORS || '()'.includes(char))
      yield char
  }
  if (value)
    yield Number(value)
}

function* toPostfix (parsedExpression) {
  const stack = []
  const last = (arr) => arr[arr.length - 1]
  for (let token of parsedExpression) {
    if (token in OPERATORS) {
      while (
        stack.length && last(stack) !== '(' &&
        OPERATORS[token][0] <= OPERATORS[last(stack)][0]
      )
        yield stack.pop()
      stack.push(token)
    } else if (token === ')')
        while (stack.length) {
          let operand = stack.pop()
          if (operand === '(')
            break
          yield operand
        }
    else if (token === '(')
        stack.push(token)
    else
        yield token
  }
  while (stack.length)
    yield stack.pop()
}
```
```javascript Eval
function calc (postfixExpression) {
  const stack = []
  for (let token of postfixExpression)
    if (token in OPERATORS)
      stack.push(OPERATORS[token][1](stack.pop(), stack.pop()))
    else
      stack.push(token)
  return stack.pop()
}

function eval (expression) {
  const parsed = parse(expression)
  const polish = toPostfix(parsed)
  return calc(polish)
}

eval('3*(2+2)')
```

